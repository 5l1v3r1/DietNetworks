#!/bin/bash -l
# Bash is needed because we use its "array" data structure
# the -l flag means it will act like a login shell,
# and source the .profile, .bashrc, and so on

# List of all tasks to execute
tasks=(
"python -u learn_gene_vector.py --dataset=1000_genomes --disc_nonlinearity=softmax --prec_recall_cutoff=0 --early_stop_criterion=accuracy -ne=1000 -g=0.0 -l=0.0 --learning_rate=0.0001 -eni=0.01 -dni=0.01 --n_hidden_u=[100] --n_hidden_t_enc=[100] --n_hidden_t_dec=[100] --n_hidden_s=[100] --which_fold=0 -exp_name= -rp=0"
)

# Execute the pre tasks
echo '[DBI] executing on host' $HOSTNAME
echo MOAB_JOBNAME=${MOAB_JOBNAME}
echo MOAB_USER=${MOAB_USER}
echo MOAB_TASKMAP=${MOAB_TASKMAP}
echo MOAB_CLASS=${MOAB_CLASS}
echo MOAB_PROCCOUNT=${MOAB_PROCCOUNT}
echo MOAB_GROUP=${MOAB_GROUP}
echo MOAB_NODELIST=${MOAB_NODELIST}
echo MOAB_ACCOUNT=${MOAB_ACCOUNT}
echo MOABHOMEDIR=${MOABHOMEDIR}
echo MOAB_MACHINE=${MOAB_MACHINE}
echo MOAB_NODECOUNT=${MOAB_NODECOUNT}
echo MOAB_JOBID=${MOAB_JOBID}
echo MOAB_QOS=${MOAB_QOS}
echo MOAB_PARTITION=${MOAB_PARTITION}

# Execute the task
${tasks[$MOAB_JOBARRAYINDEX]}
